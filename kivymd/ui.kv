MDScreenManager:
    md_bg_color: app.theme_cls.backgroundColor
    MDScreen:
        name: 'login'
        MDBoxLayout:
            orientation: 'vertical'
            adaptive_size: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            spacing: '15dp'
            MDLabel:
                text: 'Вход'
                theme_font_size: 'Custom'
                font_size: '32sp'
                theme_font_name: 'Custom'
                font_family: 'Roboto'
                adaptive_height: True
                halign: 'center'
            MDTextField:
                id: login_login
                mode: 'outlined'
                MDTextFieldLeadingIcon:
                    icon: 'account'
                MDTextFieldHintText:
                    text: 'Логин'
            MDTextField:
                id: login_password
                mode: 'outlined'
                password: True
                password_mask: '*'
                MDTextFieldLeadingIcon:
                    icon: 'key'
                MDTextFieldHintText:
                    text: 'Пароль'
            MDBoxLayout:
                orientation: 'horizontal'
                adaptive_size: True
                spacing: '15dp'
                MDButton:
                    style: 'filled'
                    on_press: app.root.current = 'register'
                    MDButtonIcon:
                        icon: 'account-plus'
                    MDButtonText:
                        text: 'Регистрация'
                MDButton:
                    style: 'filled'
                    on_press: app.app_login(login_login.text, login_password.text)
                    MDButtonIcon:
                        icon: 'login'
                    MDButtonText:
                        text: 'Вход'
        MDFloatLayout:
            MDIconButton:
                icon: 'eye'
                pos: login_password.pos[0] + login_password.width - self.width - dp(5), login_password.pos[1] + login_password.height / 2 - self.height / 2
                on_press:
                    self.icon = 'eye'
                    login_password.password = False
                on_release:
                    self.icon = 'eye-off'
                    login_password.password = True
    MDScreen:
        name: 'register'
        MDBoxLayout:
            orientation: 'vertical'
            adaptive_size: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            spacing: '15dp'
            MDLabel:
                text: 'Регистрация'
                theme_font_size: 'Custom'
                font_size: '32sp'
                theme_font_name: 'Custom'
                font_family: 'XOThames'
                adaptive_height: True
                halign: 'center'
            MDTextField:
                id: register_login
                mode: 'outlined'
                MDTextFieldLeadingIcon:
                    icon: 'account'
                MDTextFieldHintText:
                    text: 'Логин'
            MDTextField:
                id: register_password
                mode: 'outlined'
                password: True
                password_mask: '*'
                MDTextFieldLeadingIcon:
                    icon: 'key'
                MDTextFieldHintText:
                    text: 'Пароль'
            MDTextField:
                id: register_password_confirm
                mode: 'outlined'
                password: True
                password_mask: '*'
                MDTextFieldLeadingIcon:
                    icon: 'key'
                MDTextFieldHintText:
                    text: 'Подтвердите пароль'
            MDBoxLayout:
                orientation: 'horizontal'
                adaptive_size: True
                spacing: '15dp'
                MDButton:
                    style: 'filled'
                    on_press: app.app_register(register_login.text, register_password.text, register_password_confirm.text)
                    MDButtonIcon:
                        icon: 'account-plus'
                    MDButtonText:
                        text: 'Зарегистрироваться'
                MDButton:
                    style: 'filled'
                    on_press: app.switch_to_login()
                    MDButtonIcon:
                        icon: 'login'
                    MDButtonText:
                        text: 'Вход'
        MDFloatLayout:
            MDIconButton:
                icon: 'eye'
                pos: register_password.pos[0] + register_password.width - self.width - dp(5), register_password.pos[1] + register_password.height / 2 - self.height / 2
                on_press:
                    self.icon = 'eye'
                    register_password.password = False
                on_release:
                    self.icon = 'eye-off'
                    register_password.password = True
    MDScreen:
        name: 'main'
        MDBoxLayout:
            size_hint_x: None
            orientation: 'vertical'
            theme_width:'Custom'
            adaptive_height: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            spacing: '10'
            MDButton:
                style: 'tonal'
                theme_width: 'Custom'
                width: '150dp'
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                MDButtonIcon:
                    icon: 'play'
                    pos: [btn_1_text.x - self.width - dp(10), 0]
                MDButtonText:
                    id: btn_1_text
                    text: 'Начать игру'
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            MDButton:
                style: 'tonal'
                theme_width: 'Custom'
                width: '150dp'
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                on_press:
                    root.current = 'settings'
                MDButtonIcon:
                    icon: 'cog'
                    pos: [btn_1_text.x - self.width - dp(10), 0]
                MDButtonText:
                    id: btn_1_text
                    text: 'Настройки'
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            MDButton:
                style: 'tonal'
                theme_width: 'Custom'
                width: '150dp'
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                MDButtonIcon:
                    icon: 'logout'
                    pos: [btn_1_text.x - self.width - dp(10), 0]
                MDButtonText:
                    id: btn_1_text
                    text: 'Выход'
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
    MDScreen:
        name: 'settings'
        MDBoxLayout:
            orientation:'vertical'
            MDTopAppBar:
                MDTopAppBarLeadingButtonContainer: # Левый контейнер с кнопками
                    MDActionTopAppBarButton: # Кнопка для контейнера AppBar
                        icon: 'arrow-left'
                        icon_color: [1,1,1] if app.theme_cls.theme_style == "Dark" else [0,0,0]
                    MDTopAppBarTitle:
                        text: 'Настройки'
                        theme_text_color: 'Custom'
                        text_color: [1,1,1] if app.theme_cls.theme_style == "Dark" else [0,0,0]
            MDScrollView:
                MDBoxLayout:
                    orientation: 'vertical'
                    adaptive_height: True
                    MDBoxLayout:
                        padding: '25dp'
                        orientation:'horizontal'
                        adaptive_height: True
                        spacing: '25dp'
                        MDIcon:
                            icon:'theme-light-dark'
                            pos_hint:{'center_y':.5}
                        MDLabel:
                            text: 'Тема приложения'
                            adaptive_height: True
                            size_hint_x:1
                            theme_line_height: "Custom"
                            line_height:1
                            pos_hint:{'center_y':.5}
                        MDSwitch:
                            active: True if app.theme_cls.theme_style == 'Dark' else False
                            icon_active: 'weather-night'
                            icon_inactive: 'weather-sunny'
                            pos_hint:{'center_y':.5}
                            on_active:
                                app.theme_cls.theme_style = 'Dark' if self.active else 'Light'
                    MDBoxLayout:
                        padding: '25dp'
                        orientation:'horizontal'
                        adaptive_height: True
                        spacing: '25dp'
                        MDIcon:
                            icon:'palette'
                            pos_hint:{'center_y':.5}
                        MDLabel:
                            text:'Цветовая схема'
                            adaptive_height: True
                            size_hint_x:1
                            theme_line_height: 'Custom'
                            line_height: 1
                            pos_hint:{'center_y':.5}
                        MDBoxLayout:
                            adaptive_size: True
                            orientation: 'vertical'
                            spacing: '15dp'
                            MDCheckbox:
                                active: True if app.theme_cls.primary_palette == self.value else False
                                value: 'Blue'
                                group:'set_acc_col'
                                color_active: self.value.lower()
                                color_inactive:
                                on_active: app.radio_change_color(*args)
                            MDCheckbox:
                                active: False
                                value: 'Yellow'
                                group:'set_acc_col'
                                on_active: app.radio_change_color(*args)


                           # MDCheckbox:
                           #    active: True if app.theme_cls.theme_style == 'Dark' else False
                           #    checkbox_icon_normal:'weather-sunny'
                           #    checkbox_icon_down:'weather-night'
                           #    on_active:
                           #        app.theme_cls.theme_style = 'Dark' if self.active else 'Light'